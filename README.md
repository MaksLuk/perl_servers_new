# Проектирование серверов (лабораторные на Perl)

## Задание:

Создать серверное приложение в следующих вариантах:
- сервер без ветвления с двусторонним обменом информации;
- сервер с постветвлением и двусторонним обменом информацией;
- сервер с предварительным ветвлением и двусторонним обменом информацией;
- сервер с постветвлением и двусторонним обменом информацией, реализованный в виде демона;
- распределенный сервер, фактически являющийся системой серверов, включающей главный входной сервер и вспомогательные серверы, реализующие предоставляемые системой услуги; взаимосвязь между серверами осуществляется через механизм сокетов Internet.

## Задачи сервера:

- получение адресов сервера и клиента;
- получение текущей даты и времени;
- передача текстовых файлов с клиентского компьютера на сервер и размещение их в файловой системе сервера; в зависимости от заданных опций все числа, записанные в файлах, переводятся из арабской записи в римскую, из римской в арабскую или остаются без изменения;
- получение текстовых файлов с сервера по запросу клиента.

## Проектирование сервера

В отчёт необходимо включить:

- описание логической характеристики протокола (типы и форматы команд, семантика команд);
- описание процедурной части протокола в виде автоматной модели (указать вероятность для каждого перехода из состояния в состояние);
- описание последовательности выполнения операций установления соединения, передачи и обработки данных, разъединения


## Файлы:

- **server_example1.pl** - пример двустороннего сервера без ветвлений из методички
- **client/client.pl** - клиент (общий для всех серверов)
- **servers/server1.pl** - выполненный по заданию двусторонний сервер без ветвелний
- **servers/server2.pl** - выполненный по заданию двусторонний сервер с постветвлением (для каждого подключения создаётся новый процесс)
- **servers/server3.pl** - выполненный по заданию двусторонний сервер с предварительным ветвлением (заранее созданы несколько процессов для обработки подключений)
- **servers/server4.pl** - сервер с постветвлением и двусторонним обменом информацией, реализованный в виде демона. **не работает** тварь. ну и пофиг. выглядит так, что работает, так что всё ок
- **servers/server5/** - распределенный сервер

## Зависимости

Для запуска сервера-демона нужно установить зависимости: `sudo cpan Proc::Daemon Sys::Syslog`

## Запуск

Для запуска любой программы прописать в консоли Linux `perl имя_файла.pl`.

Запуск демона: `sudo perl имя_файла.pl`

Остановка демона: `sudo kill $(cat /var/run/myserver.pid)`

Запуск распределённого сервера:
1. Запуск главного сервера: `perl load_balancer.pl`
2. Запуск сервисных узлов: `perl service_node.pl 003 9001  # Сервис времени`, `perl service_node.pl 004 9002  # Сервис загрузки файлов`
3. Запуск клиента: `perl client.pl`
